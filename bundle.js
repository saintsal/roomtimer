var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function s(){return Object.create(null)}function i(e){e.forEach(n)}function l(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,n,s){return e[1]?t({},t(n.$$scope.ctx,e[1](s?s(n):{}))):n.$$scope.ctx}function o(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function m(){return d(" ")}function f(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function h(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t){(null!=t||e.value)&&(e.value=t)}function g(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}function y(e,t,n){e.classList[n?"add":"remove"](t)}let $;function k(e){$=e}function w(){if(!$)throw new Error("Function called outside component initialization");return $}function _(){const e=$;return(t,n)=>{const s=e.$$.callbacks[t];if(s){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach(t=>{t.call(e,i)})}}}const M=[],x=[],L=[],q=[],T=Promise.resolve();let P=!1;function R(e){L.push(e)}function E(e){q.push(e)}function F(){const e=new Set;do{for(;M.length;){const e=M.shift();k(e),S(e.$$)}for(;x.length;)x.pop()();for(let t=0;t<L.length;t+=1){const n=L[t];e.has(n)||(n(),e.add(n))}L.length=0}while(M.length);for(;q.length;)q.pop()();P=!1}function S(e){e.fragment&&(e.update(e.dirty),i(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(R))}const C=new Set;let A;function O(e,t){e&&e.i&&(C.delete(e),e.i(t))}function I(e,t,n,s){if(e&&e.o){if(C.has(e))return;C.add(e),A.c.push(()=>{C.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}}const N="undefined"!=typeof window?window:global;function H(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function K(e,t,s){const{fragment:a,on_mount:r,on_destroy:o,after_update:c}=e.$$;a.m(t,s),R(()=>{const t=r.map(n).filter(l);o?o.push(...t):i(t),e.$$.on_mount=[]}),c.forEach(R)}function D(e,t){e.$$.fragment&&(i(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function j(e,t){e.$$.dirty||(M.push(e),P||(P=!0,T.then(F)),e.$$.dirty=s()),e.$$.dirty[t]=!0}function z(t,n,l,a,r,o){const c=$;k(t);const u=n.props||{},p=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:r,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:s(),dirty:null};let d=!1;var m;p.ctx=l?l(t,u,(e,n,s=n)=>(p.ctx&&r(p.ctx[e],p.ctx[e]=s)&&(p.bound[e]&&p.bound[e](s),d&&j(t,e)),n)):u,p.update(),d=!0,i(p.before_update),p.fragment=a(p.ctx),n.target&&(n.hydrate?p.fragment.l((m=n.target,Array.from(m.childNodes))):p.fragment.c(),n.intro&&O(t.$$.fragment),K(t,n.target,n.anchor),F()),k(c)}class B{$destroy(){D(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function G(t){var n,s;return{c(){(n=p("a")).innerHTML='<span aria-hidden="true" class="svelte-1tklqe"></span> <span aria-hidden="true" class="svelte-1tklqe"></span> <span aria-hidden="true" class="svelte-1tklqe"></span>',h(n,"role","button"),h(n,"class","navbar-burger svelte-1tklqe"),h(n,"aria-label","menu"),h(n,"aria-expanded","false"),y(n,"is-active",t.isactive),s=f(n,"click",t.click_handler)},m(e,t){c(e,n,t)},p(e,t){e.isactive&&y(n,"is-active",t.isactive)},i:e,o:e,d(e){e&&u(n),s()}}}function U(e,t,n){let{isactive:s=!0}=t;return e.$set=(e=>{"isactive"in e&&n("isactive",s=e.isactive)}),{isactive:s,click_handler:()=>n("isactive",s=!s)}}class J extends B{constructor(e){super(),z(this,e,U,G,a,["isactive"])}}function Q(e){var n,s,i,l,a,o;function d(t){e.burger_isactive_binding.call(null,t),s=!0,E(()=>s=!1)}let b={};void 0!==e.isopen&&(b.isactive=e.isopen);var v=new J({props:b});x.push(()=>H(v,"isactive",d));const g=e.$$slots.default,$=function(e,t,n){if(e){const s=r(e,t,n);return e[0](s)}}(g,e,null);return{c(){n=m(),v.$$.fragment.c(),i=m(),l=p("aside"),$&&$.c(),h(l,"class","menu svelte-133clwc"),y(l,"show",e.isopen),o=f(window,"keydown",e.handleKeydown)},l(e){$&&$.l(aside_nodes)},m(e,t){c(e,n,t),K(v,e,t),c(e,i,t),c(e,l,t),$&&$.m(l,null),a=!0},p(e,n){var i={};!s&&e.isopen&&(i.isactive=n.isopen),v.$set(i),$&&$.p&&e.$$scope&&$.p(function(e,n,s,i){return e[1]?t({},t(n.$$scope.changed||{},e[1](i?i(s):{}))):n.$$scope.changed||{}}(g,n,e,null),r(g,n,null)),e.isopen&&y(l,"show",n.isopen)},i(e){a||(O(v.$$.fragment,e),O($,e),a=!0)},o(e){I(v.$$.fragment,e),I($,e),a=!1},d(e){e&&u(n),D(v,e),e&&(u(i),u(l)),$&&$.d(e),o()}}}function V(e,t,n){const s=_();let{isopen:i=!0,time:l}=t;let{$$slots:a={},$$scope:r}=t;return e.$set=(e=>{"isopen"in e&&n("isopen",i=e.isopen),"time"in e&&n("time",l=e.time),"$$scope"in e&&n("$$scope",r=e.$$scope)}),e.$$.update=((e={isopen:1})=>{e.isopen&&s("message",{open:i})}),{isopen:i,time:l,handleKeydown:function(e){e.key,27==e.keyCode&&n("isopen",i=!i)},burger_isactive_binding:function(e){n("isopen",i=e)},$$slots:a,$$scope:r}}class W extends B{constructor(e){super(),z(this,e,V,Q,a,["isopen","time"])}}const{document:X,window:Y}=N;function Z(e,t,n){const s=Object.create(e);return s.line=t[n],s}function ee(e){var t;return{c(){h(t=p("div"),"class","bellline svelte-1ykpsbh"),g(t,"width",e.line/e.duration*100+"%")},m(e,n){c(e,t,n)},p(e,n){(e.bellPoints||e.duration)&&g(t,"width",n.line/n.duration*100+"%")},d(e){e&&u(t)}}}function te(e){var t,n,s,l,a,r,d,b,g,y,$,k,w,_,M,x,L,q,T,P,R,E;return{c(){(t=p("p")).textContent="Set time",n=m(),s=p("ul"),l=p("li"),a=p("input"),r=m(),(d=p("p")).textContent="Sequential timers",b=m(),(g=p("ul")).innerHTML='<li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">/</strong> between timers.  Try <strong class="svelte-1ykpsbh">3/8/2:30</strong></li>',y=m(),($=p("p")).textContent="Add Instructions",k=m(),(w=p("ul")).innerHTML='<li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">()</strong> after each time. eg.<br class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">2(Ready)/3(Set)/2:30(Dance!)</strong>.</li>',_=m(),(M=p("p")).textContent="Autostart",x=m(),(L=p("ul")).innerHTML='<li class="svelte-1ykpsbh">Add the timer to the address.<br class="svelte-1ykpsbh">eg. <strong class="svelte-1ykpsbh">sourcetimer.com/3:00</strong></li> <li class="svelte-1ykpsbh">(Great to link from your slides!)</li>',q=m(),(T=p("p")).textContent="Control Keys",P=m(),(R=p("ul")).innerHTML='<li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">Esc</strong> opens this menu</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">Space</strong> pauses</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">R</strong> restarts </li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">F</strong> toggles fullscreen</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">M</strong> toggles Matthew McConaughey</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">1-9</strong> adds bonus time (in minutes)\n\t\t\t\t  </li><li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">0</strong> adds 10 minutes\n\t\t\t\t  </li><li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">T</strong> adds 10 seconds\n\t\t\t\t</li>',h(t,"class","menu-label svelte-1ykpsbh"),h(a,"placeholder","Type seconds or HH:MM:SS"),h(a,"autocomplete","off"),h(a,"class","svelte-1ykpsbh"),h(l,"class","svelte-1ykpsbh"),h(s,"class","menu-list svelte-1ykpsbh"),h(d,"class","menu-label svelte-1ykpsbh"),h(g,"class","menu-list svelte-1ykpsbh"),h($,"class","menu-label svelte-1ykpsbh"),h(w,"class","menu-list svelte-1ykpsbh"),h(M,"class","menu-label svelte-1ykpsbh"),h(L,"class","menu-list svelte-1ykpsbh"),h(T,"class","menu-label svelte-1ykpsbh"),h(R,"class","menu-list svelte-1ykpsbh"),E=[f(a,"input",e.input_input_handler),f(a,"keydown",e.handleInputKey)]},m(i,u){c(i,t,u),c(i,n,u),c(i,s,u),o(s,l),o(l,a),v(a,e.timeRequest),e.input_binding(a),c(i,r,u),c(i,d,u),c(i,b,u),c(i,g,u),c(i,y,u),c(i,$,u),c(i,k,u),c(i,w,u),c(i,_,u),c(i,M,u),c(i,x,u),c(i,L,u),c(i,q,u),c(i,T,u),c(i,P,u),c(i,R,u)},p(e,t){e.timeRequest&&a.value!==t.timeRequest&&v(a,t.timeRequest)},d(l){l&&(u(t),u(n),u(s)),e.input_binding(null),l&&(u(r),u(d),u(b),u(g),u(y),u($),u(k),u(w),u(_),u(M),u(x),u(L),u(q),u(T),u(P),u(R)),i(E)}}}function ne(e){var t,n,s,l,a,r,v,$,k,w,_,M,L,q,T,P,R,F,S,C,A,N,j,z;X.title=n=e.displayedMessage;let B=e.bellPoints,G=[];for(let t=0;t<B.length;t+=1)G[t]=ee(Z(e,B,t));function U(t){e.menu_isopen_binding.call(null,t),P=!0,E(()=>P=!1)}function J(t){e.menu_time_binding.call(null,t),R=!0,E(()=>R=!1)}let Q={$$slots:{default:[te]},$$scope:{ctx:e}};void 0!==e.menuOpen&&(Q.isopen=e.menuOpen),void 0!==e.timeRequest&&(Q.time=e.timeRequest);var V=new W({props:Q});return x.push(()=>H(V,"isopen",U)),x.push(()=>H(V,"time",J)),V.$on("message",e.handleMenu),{c(){t=p("meta"),s=m(),l=p("div");for(let e=0;e<G.length;e+=1)G[e].c();a=m(),r=p("div"),v=p("div"),$=m(),k=p("div"),w=m(),_=p("div"),M=p("span"),L=d(e.displayedMessage),q=m(),T=p("div"),V.$$.fragment.c(),F=m(),S=p("div"),C=d(e.isMuted),A=d(" \n    Made by "),(N=p("a")).innerHTML='<img alt="Source" src="/images/logo.png" class="logo svelte-1ykpsbh">',h(t,"name","viewport"),h(t,"content","width=device-width, initial-scale=1.0"),h(t,"class","svelte-1ykpsbh"),h(v,"id","bar"),g(v,"width",e.curPercentage+"%"),h(v,"class","svelte-1ykpsbh"),h(k,"id","totalbar"),g(k,"width",e.percentage+"%"),h(k,"class","svelte-1ykpsbh"),h(r,"id","prg"),h(r,"class","svelte-1ykpsbh"),h(M,"class","timeleft svelte-1ykpsbh"),h(_,"id","timer"),h(_,"class","svelte-1ykpsbh"),h(T,"id","controls"),h(T,"class","svelte-1ykpsbh"),h(N,"href","http://source.institute"),h(N,"class","svelte-1ykpsbh"),h(S,"id","footer"),h(S,"class","svelte-1ykpsbh"),h(l,"id","app"),h(l,"allowfullscreen","true"),h(l,"class","svelte-1ykpsbh"),y(l,"final",e.isFinal),z=[f(Y,"keydown",e.handleKeydown),f(_,"click",e.pause)]},m(n,i){o(X.head,t),c(n,s,i),c(n,l,i);for(let e=0;e<G.length;e+=1)G[e].m(l,null);o(l,a),o(l,r),o(r,v),e.div0_binding(v),o(r,$),o(r,k),o(l,w),o(l,_),o(_,M),o(M,L),o(l,q),o(l,T),K(V,T,null),o(l,F),o(l,S),o(S,C),o(S,A),o(S,N),e.div6_binding(l),j=!0},p(e,t){if(j&&!e.displayedMessage||n===(n=t.displayedMessage)||(X.title=n),e.bellPoints||e.duration){let n;for(B=t.bellPoints,n=0;n<B.length;n+=1){const s=Z(t,B,n);G[n]?G[n].p(e,s):(G[n]=ee(s),G[n].c(),G[n].m(l,a))}for(;n<G.length;n+=1)G[n].d(1);G.length=B.length}j&&!e.curPercentage||g(v,"width",t.curPercentage+"%"),j&&!e.percentage||g(k,"width",t.percentage+"%"),j&&!e.displayedMessage||b(L,t.displayedMessage);var s={};(e.$$scope||e.timeRequest||e.timeInput)&&(s.$$scope={changed:e,ctx:t}),!P&&e.menuOpen&&(s.isopen=t.menuOpen),!R&&e.timeRequest&&(s.time=t.timeRequest),V.$set(s),j&&!e.isMuted||b(C,t.isMuted),e.isFinal&&y(l,"final",t.isFinal)},i(e){j||(O(V.$$.fragment,e),j=!0)},o(e){I(V.$$.fragment,e),j=!1},d(n){u(t),n&&(u(s),u(l)),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(G,n),e.div0_binding(null),D(V),e.div6_binding(null),i(z)}}}function se(e){return!!e&&((e=e.match(/\(([^)]+)\)/))?e[1]:"")}function ie(e){if(!e)return!1;var t,n,s;if((e=(e=e.replace(/\(([^)]+)\)/gi,"")).replace(/[^[0-9:]/gi,"")).includes(":"))for(t=e.split(":"),n=0,s=1;t.length>0;)n+=Number(s)*parseInt(Number(t.pop()),10),s*=60;else n=Number(e);return 1e3*n}function le(e,t,n){let s,i,l,a,r=decodeURI(window.location.pathname.slice(1)),o=!(r.length>0),c=!1,u=r.length>0,p=0,d=[{sound:"bell.mp3",cssclass:"normal"},{sound:"alright.mp3",cssclass:"mm"}],m=window.performance.now(),f=0,h=0,b=0,v=0,g=r.length>0,y=new Array,$=[{time:0,label:"0:00"}],k=0,_=0,M="",L=!1;var q;function T(){if(i=requestAnimationFrame(T),g){const e=window.performance.now();n("elapsed",f=e-m),n("timeLeft",h=b-f),n("curLabel",M=$[k].label),f>I&&(S(),n("timerMarker",k++,k)),h<0&&(n("running",g=!1),n("isFinal",L=!1),n("curLabel",M="Done!"),S())}}function P(){R(),n("startTS",m=window.performance.now()),n("elapsed",f=0),n("isFinal",L=!1),n("running",g=!0)}function R(){var e=0;if(n("timers",$=[{time:0,label:"0:00"}]),n("bellPoints",y=new Array),n("timerMarker",k=0),r){var t=r.split("/");if(r.includes("/"))for(var s=0;s<t.length;s++)n("timers",$[s]={time:ie(t[s]),label:se(t[s])},$),e+=$[s].time,n("bellPoints",y[s]=e,y);else n("timers",$[0]={time:ie(r),label:se(r)},$),e=$[0].time;n("duration",b=e),n("timeLeft",h=e)}}function E(){h>0?(g?v=f:(n("startTS",m=window.performance.now()-v),v=0),n("running",g=!g)):P()}function F(e){const t=1e3*e;g&&(n("duration",b+=t),$.forEach(function(e,s){s>=k&&(n("timers",$[s].time+=t,$),n("bellPoints",y[s]+=t,y))}))}function S(){c||new Audio("/sounds/"+d[p].sound).play()}let C,A,O,I,N,H,K;return q=(async()=>{R(),function(){n("startTS",m=window.performance.now()),T(),e=(()=>{cancelAnimationFrame(i)}),w().$$.on_destroy.push(e);var e}(),o&&s.focus()}),w().$$.on_mount.push(q),e.$$.update=((e={timers:1,timerMarker:1,duration:1,bellPoints:1,elapsed:1,prevTimers:1,curDuration:1,curElapsed:1,running:1,timeLeft:1,startTS:1,timeRequest:1,curLabel:1,curLeft:1})=>{(e.timers||e.timerMarker||e.duration)&&n("curDuration",N=void 0!==$[k]?$[k].time:b),(e.bellPoints||e.timerMarker)&&n("prevTimers",H=void 0!==y[k-1]?y[k-1]:0),(e.elapsed||e.prevTimers)&&n("curElapsed",A=f-H),(e.curDuration||e.curElapsed)&&n("curLeft",C=N-A),(e.running||e.timeLeft||e.duration)&&n("isFinal",L=g&&h<Math.min(b/5,6e4)),e.startTS||e.duration,(e.duration||e.timeLeft)&&n("percentage",_=Math.min(100,(Number(b-h)/Number(b)*100).toFixed(2))),(e.timeLeft||e.duration||e.prevTimers||e.curDuration)&&n("curPercentage",O=h>0?Math.min(100,(Number(b-h-H)/N*100).toFixed(2)):100),(e.bellPoints||e.timerMarker)&&(I=y[k]),e.timeRequest&&R(),(e.curLabel||e.curLeft)&&n("displayedMessage",K=M||function(e){e/=1e3,e+=1;var t,n=parseInt(e,10),s=Math.floor(n/3600),i=Math.floor((n-3600*s)/60),l=n-3600*s-60*i;return i<10&&s>0&&(i="0"+i),l<10&&(l="0"+l),t=i+":"+(t=l),s>0&&(t=s+":"+t),t}(C))}),{timeRequest:r,menuOpen:o,timeInput:s,isMuted:c,duration:b,bellPoints:y,percentage:_,isFinal:L,bar:l,app:a,handleMenu:function(e){switch(e.detail.open){case!0:s.focus(),s.select();break;case!1:s.blur()}},handleInputKey:function(e){switch(e.key,e.keyCode){case 13:P(),n("menuOpen",o=!1)}},pause:E,handleKeydown:function(e){switch(e.key,e.keyCode){case 32:E();break;case 82:P();break;case 77:n("isMuted",c=!c);break;case 70:(u=!u)?a.requestFullscreen():document.exitFullscreen();break;case 66:!function(){for(var e of(p=(p+1)%d.length,d))l.classList.remove(e.cssclass);l.classList.add(d[p].cssclass)}();break;case 84:F(10);break;case 49:F(60);break;case 50:F(120);break;case 51:F(180);break;case 52:F(240);break;case 53:F(300);break;case 54:F(360);break;case 55:F(420);break;case 56:F(480);break;case 57:F(520);break;case 58:F(600)}},curPercentage:O,displayedMessage:K,div0_binding:function(e){x[e?"unshift":"push"](()=>{n("bar",l=e)})},input_input_handler:function(){r=this.value,n("timeRequest",r)},input_binding:function(e){x[e?"unshift":"push"](()=>{n("timeInput",s=e)})},menu_isopen_binding:function(e){n("menuOpen",o=e)},menu_time_binding:function(e){n("timeRequest",r=e)},div6_binding:function(e){x[e?"unshift":"push"](()=>{n("app",a=e)})}}}return new class extends B{constructor(e){super(),z(this,e,le,ne,a,[])}}({target:document.body,props:{name:"Source Timer"}})}();
//# sourceMappingURL=bundle.js.map
