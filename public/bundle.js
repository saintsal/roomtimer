var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function s(){return Object.create(null)}function i(e){e.forEach(n)}function l(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,n,s){return e[1]?t({},t(n.$$scope.ctx,e[1](s?s(n):{}))):n.$$scope.ctx}function o(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function m(){return d(" ")}function f(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function h(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){(null!=t||e.value)&&(e.value=t)}function v(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}function g(e,t,n){e.classList[n?"add":"remove"](t)}let y;function $(e){y=e}function k(){if(!y)throw new Error("Function called outside component initialization");return y}function w(){const e=y;return(t,n)=>{const s=e.$$.callbacks[t];if(s){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach(t=>{t.call(e,i)})}}}const _=[],M=[],x=[],L=[],q=Promise.resolve();let T=!1;function P(e){x.push(e)}function R(e){L.push(e)}function E(){const e=new Set;do{for(;_.length;){const e=_.shift();$(e),F(e.$$)}for(;M.length;)M.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];e.has(n)||(n(),e.add(n))}x.length=0}while(_.length);for(;L.length;)L.pop()();T=!1}function F(e){e.fragment&&(e.update(e.dirty),i(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(P))}const S=new Set;let C;function A(e,t){e&&e.i&&(S.delete(e),e.i(t))}function O(e,t,n,s){if(e&&e.o){if(S.has(e))return;S.add(e),C.c.push(()=>{S.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}}const I="undefined"!=typeof window?window:global;function N(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function H(e,t,s){const{fragment:a,on_mount:r,on_destroy:o,after_update:c}=e.$$;a.m(t,s),P(()=>{const t=r.map(n).filter(l);o?o.push(...t):i(t),e.$$.on_mount=[]}),c.forEach(P)}function K(e,t){e.$$.fragment&&(i(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function D(e,t){e.$$.dirty||(_.push(e),T||(T=!0,q.then(E)),e.$$.dirty=s()),e.$$.dirty[t]=!0}function j(t,n,l,a,r,o){const c=y;$(t);const u=n.props||{},p=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:r,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:s(),dirty:null};let d=!1;var m;p.ctx=l?l(t,u,(e,n,s=n)=>(p.ctx&&r(p.ctx[e],p.ctx[e]=s)&&(p.bound[e]&&p.bound[e](s),d&&D(t,e)),n)):u,p.update(),d=!0,i(p.before_update),p.fragment=a(p.ctx),n.target&&(n.hydrate?p.fragment.l((m=n.target,Array.from(m.childNodes))):p.fragment.c(),n.intro&&A(t.$$.fragment),H(t,n.target,n.anchor),E()),$(c)}class z{$destroy(){K(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function B(t){var n,s;return{c(){(n=p("a")).innerHTML='<span aria-hidden="true" class="svelte-1tklqe"></span> <span aria-hidden="true" class="svelte-1tklqe"></span> <span aria-hidden="true" class="svelte-1tklqe"></span>',h(n,"role","button"),h(n,"class","navbar-burger svelte-1tklqe"),h(n,"aria-label","menu"),h(n,"aria-expanded","false"),g(n,"is-active",t.isactive),s=f(n,"click",t.click_handler)},m(e,t){c(e,n,t)},p(e,t){e.isactive&&g(n,"is-active",t.isactive)},i:e,o:e,d(e){e&&u(n),s()}}}function G(e,t,n){let{isactive:s=!0}=t;return e.$set=(e=>{"isactive"in e&&n("isactive",s=e.isactive)}),{isactive:s,click_handler:()=>n("isactive",s=!s)}}class U extends z{constructor(e){super(),j(this,e,G,B,a,["isactive"])}}function J(e){var n,s,i,l,a,o;function d(t){e.burger_isactive_binding.call(null,t),s=!0,R(()=>s=!1)}let b={};void 0!==e.isopen&&(b.isactive=e.isopen);var v=new U({props:b});M.push(()=>N(v,"isactive",d));const y=e.$$slots.default,$=function(e,t,n){if(e){const s=r(e,t,n);return e[0](s)}}(y,e,null);return{c(){n=m(),v.$$.fragment.c(),i=m(),l=p("aside"),$&&$.c(),h(l,"class","menu svelte-133clwc"),g(l,"show",e.isopen),o=f(window,"keydown",e.handleKeydown)},l(e){$&&$.l(aside_nodes)},m(e,t){c(e,n,t),H(v,e,t),c(e,i,t),c(e,l,t),$&&$.m(l,null),a=!0},p(e,n){var i={};!s&&e.isopen&&(i.isactive=n.isopen),v.$set(i),$&&$.p&&e.$$scope&&$.p(function(e,n,s,i){return e[1]?t({},t(n.$$scope.changed||{},e[1](i?i(s):{}))):n.$$scope.changed||{}}(y,n,e,null),r(y,n,null)),e.isopen&&g(l,"show",n.isopen)},i(e){a||(A(v.$$.fragment,e),A($,e),a=!0)},o(e){O(v.$$.fragment,e),O($,e),a=!1},d(e){e&&u(n),K(v,e),e&&(u(i),u(l)),$&&$.d(e),o()}}}function Q(e,t,n){const s=w();let{isopen:i=!0,time:l}=t;let{$$slots:a={},$$scope:r}=t;return e.$set=(e=>{"isopen"in e&&n("isopen",i=e.isopen),"time"in e&&n("time",l=e.time),"$$scope"in e&&n("$$scope",r=e.$$scope)}),e.$$.update=((e={isopen:1})=>{e.isopen&&s("message",{open:i})}),{isopen:i,time:l,handleKeydown:function(e){e.key,27==e.keyCode&&n("isopen",i=!i)},burger_isactive_binding:function(e){n("isopen",i=e)},$$slots:a,$$scope:r}}class V extends z{constructor(e){super(),j(this,e,Q,J,a,["isopen","time"])}}const{document:W,window:X}=I;function Y(e,t,n){const s=Object.create(e);return s.line=t[n],s}function Z(e){var t;return{c(){h(t=p("div"),"class","bellline svelte-1ykpsbh"),v(t,"width",e.line/e.duration*100+"%")},m(e,n){c(e,t,n)},p(e,n){(e.bellPoints||e.duration)&&v(t,"width",n.line/n.duration*100+"%")},d(e){e&&u(t)}}}function ee(e){var t,n,s,l,a,r,d,v,g,y,$,k,w,_,M,x,L,q,T,P,R,E;return{c(){(t=p("p")).textContent="Set time",n=m(),s=p("ul"),l=p("li"),a=p("input"),r=m(),(d=p("p")).textContent="Sequential timers",v=m(),(g=p("ul")).innerHTML='<li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">/</strong> between timers.  Try <strong class="svelte-1ykpsbh">3/8/2:30</strong></li>',y=m(),($=p("p")).textContent="Add Instructions",k=m(),(w=p("ul")).innerHTML='<li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">()</strong> after each time. eg.<br class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">2(Ready)/3(Set)/2:30(Dance!)</strong>.</li>',_=m(),(M=p("p")).textContent="Autostart",x=m(),(L=p("ul")).innerHTML='<li class="svelte-1ykpsbh">Add the timer to the address.<br class="svelte-1ykpsbh">eg. <strong class="svelte-1ykpsbh">sourcetimer.com/3:00</strong></li> <li class="svelte-1ykpsbh">(Great to link from your slides!)</li>',q=m(),(T=p("p")).textContent="Control Keys",P=m(),(R=p("ul")).innerHTML='<li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">Esc</strong> opens this menu</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">Space</strong> pauses</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">R</strong> restarts </li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">F</strong> toggles fullscreen</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">M</strong> toggles Matthew McConaughey</li> <li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">1-9</strong> adds bonus time (in minutes)\n\t\t\t\t  </li><li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">0</strong> adds 10 minutes\n\t\t\t\t  </li><li class="svelte-1ykpsbh"><strong class="svelte-1ykpsbh">T</strong> adds 10 seconds\n\t\t\t\t</li>',h(t,"class","menu-label svelte-1ykpsbh"),h(a,"placeholder","Type seconds or HH:MM:SS"),h(a,"autocomplete","off"),h(a,"class","svelte-1ykpsbh"),h(l,"class","svelte-1ykpsbh"),h(s,"class","menu-list svelte-1ykpsbh"),h(d,"class","menu-label svelte-1ykpsbh"),h(g,"class","menu-list svelte-1ykpsbh"),h($,"class","menu-label svelte-1ykpsbh"),h(w,"class","menu-list svelte-1ykpsbh"),h(M,"class","menu-label svelte-1ykpsbh"),h(L,"class","menu-list svelte-1ykpsbh"),h(T,"class","menu-label svelte-1ykpsbh"),h(R,"class","menu-list svelte-1ykpsbh"),E=[f(a,"input",e.input_input_handler),f(a,"keydown",e.handleInputKey)]},m(i,u){c(i,t,u),c(i,n,u),c(i,s,u),o(s,l),o(l,a),b(a,e.timeRequest),e.input_binding(a),c(i,r,u),c(i,d,u),c(i,v,u),c(i,g,u),c(i,y,u),c(i,$,u),c(i,k,u),c(i,w,u),c(i,_,u),c(i,M,u),c(i,x,u),c(i,L,u),c(i,q,u),c(i,T,u),c(i,P,u),c(i,R,u)},p(e,t){e.timeRequest&&a.value!==t.timeRequest&&b(a,t.timeRequest)},d(l){l&&(u(t),u(n),u(s)),e.input_binding(null),l&&(u(r),u(d),u(v),u(g),u(y),u($),u(k),u(w),u(_),u(M),u(x),u(L),u(q),u(T),u(P),u(R)),i(E)}}}function te(e){var t,n,s,l,a,r,b,y,$,k,w,_,x,L,q,T,P,E,F,S,C;W.title=n=e.displayedMessage;let I=e.bellPoints,D=[];for(let t=0;t<I.length;t+=1)D[t]=Z(Y(e,I,t));function j(t){e.menu_isopen_binding.call(null,t),T=!0,R(()=>T=!1)}function z(t){e.menu_time_binding.call(null,t),P=!0,R(()=>P=!1)}let B={$$slots:{default:[ee]},$$scope:{ctx:e}};void 0!==e.menuOpen&&(B.isopen=e.menuOpen),void 0!==e.timeRequest&&(B.time=e.timeRequest);var G=new V({props:B});return M.push(()=>N(G,"isopen",j)),M.push(()=>N(G,"time",z)),G.$on("message",e.handleMenu),{c(){t=p("meta"),s=m(),l=p("div");for(let e=0;e<D.length;e+=1)D[e].c();a=m(),r=p("div"),b=p("div"),y=m(),$=p("div"),k=m(),w=p("div"),_=p("span"),x=d(e.displayedMessage),L=m(),q=p("div"),G.$$.fragment.c(),E=m(),(F=p("div")).innerHTML='\n\t\t\t    Made by <a href="http://source.institute" class="svelte-1ykpsbh"><img alt="Source" src="/images/logo.png" class="logo svelte-1ykpsbh"></a>',h(t,"name","viewport"),h(t,"content","width=device-width, initial-scale=1.0"),h(t,"class","svelte-1ykpsbh"),h(b,"id","bar"),v(b,"width",e.curPercentage+"%"),h(b,"class","svelte-1ykpsbh"),h($,"id","totalbar"),v($,"width",e.percentage+"%"),h($,"class","svelte-1ykpsbh"),h(r,"id","prg"),h(r,"class","svelte-1ykpsbh"),h(_,"class","timeleft svelte-1ykpsbh"),h(w,"id","timer"),h(w,"class","svelte-1ykpsbh"),h(q,"id","controls"),h(q,"class","svelte-1ykpsbh"),h(F,"id","footer"),h(F,"class","svelte-1ykpsbh"),h(l,"id","app"),h(l,"allowfullscreen","true"),h(l,"class","svelte-1ykpsbh"),g(l,"final",e.isFinal),C=[f(X,"keydown",e.handleKeydown),f(w,"click",e.pause)]},m(n,i){o(W.head,t),c(n,s,i),c(n,l,i);for(let e=0;e<D.length;e+=1)D[e].m(l,null);o(l,a),o(l,r),o(r,b),e.div0_binding(b),o(r,y),o(r,$),o(l,k),o(l,w),o(w,_),o(_,x),o(l,L),o(l,q),H(G,q,null),o(l,E),o(l,F),e.div6_binding(l),S=!0},p(e,t){if(S&&!e.displayedMessage||n===(n=t.displayedMessage)||(W.title=n),e.bellPoints||e.duration){let n;for(I=t.bellPoints,n=0;n<I.length;n+=1){const s=Y(t,I,n);D[n]?D[n].p(e,s):(D[n]=Z(s),D[n].c(),D[n].m(l,a))}for(;n<D.length;n+=1)D[n].d(1);D.length=I.length}var s,i;S&&!e.curPercentage||v(b,"width",t.curPercentage+"%"),S&&!e.percentage||v($,"width",t.percentage+"%"),S&&!e.displayedMessage||(s=x,i=""+(i=t.displayedMessage),s.data!==i&&(s.data=i));var r={};(e.$$scope||e.timeRequest||e.timeInput)&&(r.$$scope={changed:e,ctx:t}),!T&&e.menuOpen&&(r.isopen=t.menuOpen),!P&&e.timeRequest&&(r.time=t.timeRequest),G.$set(r),e.isFinal&&g(l,"final",t.isFinal)},i(e){S||(A(G.$$.fragment,e),S=!0)},o(e){O(G.$$.fragment,e),S=!1},d(n){u(t),n&&(u(s),u(l)),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(D,n),e.div0_binding(null),K(G),e.div6_binding(null),i(C)}}}function ne(e){return!!e&&((e=e.match(/\(([^)]+)\)/))?e[1]:"")}function se(e){if(!e)return!1;var t,n,s;if((e=(e=e.replace(/\(([^)]+)\)/gi,"")).replace(/[^[0-9:]/gi,"")).includes(":"))for(t=e.split(":"),n=0,s=1;t.length>0;)n+=Number(s)*parseInt(Number(t.pop()),10),s*=60;else n=Number(e);return 1e3*n}function ie(e,t,n){let s,i,l,a,r=decodeURI(window.location.pathname.slice(1)),o=!(r.length>0),c=!1,u=r.length>0,p=0,d=[{sound:"bell.mp3",cssclass:"normal"},{sound:"alright.mp3",cssclass:"mm"}],m=window.performance.now(),f=0,h=0,b=0,v=0,g=r.length>0,y=new Array,$=[{time:0,label:"0:00"}],w=0,_=0,x="",L=!1;var q;function T(){if(i=requestAnimationFrame(T),g){const e=window.performance.now();n("elapsed",f=e-m),n("timeLeft",h=b-f),n("curLabel",x=$[w].label),f>I&&(S(),n("timerMarker",w++,w)),h<0&&(n("running",g=!1),n("isFinal",L=!1),n("curLabel",x="Done!"),S())}}function P(){R(),n("startTS",m=window.performance.now()),n("elapsed",f=0),n("isFinal",L=!1),n("running",g=!0)}function R(){var e=0;if(n("timers",$=[{time:0,label:"0:00"}]),n("bellPoints",y=new Array),n("timerMarker",w=0),r){var t=r.split("/");if(r.includes("/"))for(var s=0;s<t.length;s++)n("timers",$[s]={time:se(t[s]),label:ne(t[s])},$),e+=$[s].time,n("bellPoints",y[s]=e,y);else n("timers",$[0]={time:se(r),label:ne(r)},$),e=$[0].time;n("duration",b=e),n("timeLeft",h=e)}}function E(){h>0?(g?v=f:(n("startTS",m=window.performance.now()-v),v=0),n("running",g=!g)):P()}function F(e){const t=1e3*e;g&&(n("duration",b+=t),$.forEach(function(e,s){s>=w&&(n("timers",$[s].time+=t,$),n("bellPoints",y[s]+=t,y))}))}function S(){c||new Audio("/sounds/"+d[p].sound).play()}let C,A,O,I,N,H,K;return q=(async()=>{R(),function(){n("startTS",m=window.performance.now()),T(),e=(()=>{cancelAnimationFrame(i)}),k().$$.on_destroy.push(e);var e}(),o&&s.focus()}),k().$$.on_mount.push(q),e.$$.update=((e={timers:1,timerMarker:1,duration:1,bellPoints:1,elapsed:1,prevTimers:1,curDuration:1,curElapsed:1,running:1,timeLeft:1,startTS:1,timeRequest:1,curLabel:1,curLeft:1})=>{(e.timers||e.timerMarker||e.duration)&&n("curDuration",N=void 0!==$[w]?$[w].time:b),(e.bellPoints||e.timerMarker)&&n("prevTimers",H=void 0!==y[w-1]?y[w-1]:0),(e.elapsed||e.prevTimers)&&n("curElapsed",A=f-H),(e.curDuration||e.curElapsed)&&n("curLeft",C=N-A),(e.running||e.timeLeft||e.duration)&&n("isFinal",L=g&&h<Math.min(b/5,6e4)),e.startTS||e.duration,(e.duration||e.timeLeft)&&n("percentage",_=Math.min(100,(Number(b-h)/Number(b)*100).toFixed(2))),(e.timeLeft||e.duration||e.prevTimers||e.curDuration)&&n("curPercentage",O=h>0?Math.min(100,(Number(b-h-H)/N*100).toFixed(2)):100),(e.bellPoints||e.timerMarker)&&(I=y[w]),e.timeRequest&&R(),(e.curLabel||e.curLeft)&&n("displayedMessage",K=x||function(e){e/=1e3,e+=1;var t,n=parseInt(e,10),s=Math.floor(n/3600),i=Math.floor((n-3600*s)/60),l=n-3600*s-60*i;return i<10&&s>0&&(i="0"+i),l<10&&(l="0"+l),t=i+":"+(t=l),s>0&&(t=s+":"+t),t}(C))}),{timeRequest:r,menuOpen:o,timeInput:s,duration:b,bellPoints:y,percentage:_,isFinal:L,bar:l,app:a,handleMenu:function(e){switch(e.detail.open){case!0:s.focus(),s.select();break;case!1:s.blur()}},handleInputKey:function(e){switch(e.key,e.keyCode){case 13:P(),n("menuOpen",o=!1)}},pause:E,handleKeydown:function(e){switch(e.key,e.keyCode){case 32:E();break;case 82:P();break;case 77:c=!c;break;case 70:(u=!u)?a.requestFullscreen():document.exitFullscreen();break;case 66:!function(){for(var e of(p=(p+1)%d.length,d))l.classList.remove(e.cssclass);l.classList.add(d[p].cssclass)}();break;case 84:F(10);break;case 49:F(60);break;case 50:F(120);break;case 51:F(180);break;case 52:F(240);break;case 53:F(300);break;case 54:F(360);break;case 55:F(420);break;case 56:F(480);break;case 57:F(520);break;case 58:F(600)}},curPercentage:O,displayedMessage:K,div0_binding:function(e){M[e?"unshift":"push"](()=>{n("bar",l=e)})},input_input_handler:function(){r=this.value,n("timeRequest",r)},input_binding:function(e){M[e?"unshift":"push"](()=>{n("timeInput",s=e)})},menu_isopen_binding:function(e){n("menuOpen",o=e)},menu_time_binding:function(e){n("timeRequest",r=e)},div6_binding:function(e){M[e?"unshift":"push"](()=>{n("app",a=e)})}}}return new class extends z{constructor(e){super(),j(this,e,ie,te,a,[])}}({target:document.body,props:{name:"Source Timer"}})}();
//# sourceMappingURL=bundle.js.map
